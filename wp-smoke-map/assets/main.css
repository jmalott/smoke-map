body {margin: 0;padding: 0;font-family: "Poppins", sans-serif;font-optical-sizing: auto;background-color: #f0f0f0;}#map {width: 100vw;height: 100vh;}.custom-tile-chooser {position: absolute;top: 10px;right: 10px;z-index: 1000;display: flex;flex-direction: column;background-color: #f4f4f4;border-radius: 4px;border: 2px solid rgba(0, 0, 0, 0.2);background-clip: padding-box;}.custom-tile-chooser-button {border: none;border-bottom: 1px solid #ccc;width: 1.9rem;height: 1.9rem;cursor: pointer;display: flex;align-items: center;justify-content: center;font-size: 1.0rem;margin: 0;padding: 0;opacity: 0.4;}.custom-tile-chooser-button:last-child {border-bottom: none;}.custom-tile-chooser-button:hover, .custom-tile-chooser-button.active {background-color: white;opacity: 1.0;}.loading {position: fixed;top: 50%;left: 50%;right: unset;transform: translate(-50%, -50%);background: rgba(255, 255, 255, 0.75);padding: 20px;border-radius: 12px;box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);z-index: 2000;text-align: center;width: 80vw;max-width: 500px;transition: all 0.5s ease;}.loading.status {top: 10px;right: 55px;left: unset;width: 65vw;max-width: 250px;opacity: 0.9;pointer-events: none;background: rgba(255, 255, 255, 0.85);font-size: 0.75rem;padding: 5px;transform: none;}.loading h3 {margin-top: 0;}.loading p {font-size: 0.85rem;margin-bottom: 0.25rem;}.loading button {margin: 0.4rem 0;background-color: #ee7623;color: white;border: solid 1px;border-color: #ee7623;border-radius: 25px;font-weight: 500;padding: 0.75rem 1.0rem;cursor: pointer;}.loading button:hover {background-color: white;color: #ee7623;}.loading p#loadingDisclaimer {font-size: 0.6rem;margin-bottom: 0;}.loading.status p {margin-bottom: 0;}.loading.hidden {display: none;}.loading-progress {width: 100%;height: 8px;background-color: #e0e0e0;border-radius: 25px;margin: 15px 0;overflow: hidden;}.loading-bar {height: 100%;background: linear-gradient(45deg, #1e3a8a, #333);border-radius: 25px;transition: width 0.3s ease;width: 0%;}.error-log {background: #fee;border: 1px solid #fcc;padding: 10px;margin: 10px 0;border-radius: 25px;font-size: 12px;max-height: 100px;overflow-y: auto;color: #900;}.controls {display: none;position: fixed;bottom: 8px;left: 50%;box-sizing: border-box;transform: translateX(-50%);z-index: 1000;background: rgba(255, 255, 255, 0.4);backdrop-filter: blur(10px);padding: 10px 14px;border-radius: 12px;box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);max-width: 825px;min-width: 320px;border: 1px solid rgba(0, 0, 0, 0.06);color: #333;}.controls-grid {display: grid;grid-template-columns: 1fr auto auto;gap: 20px;align-items: center;}.time-section {flex: 1;display: flex;flex-direction: column;min-width: 350px;gap: 4px;}.time-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 4px;}.layer-toggles {display: flex;flex-direction: column;gap: 6px;flex-shrink: 0;}.toggle-group {display: flex;gap: 10px;align-items: center;}.toggle-btn {background: #333 !important;color: white;border: none;padding: 4px 8px;border-radius: 25px;cursor: pointer;transition: all 0.2s ease;font-size: 0.6rem;width: 95px;line-height: 1.2;}.toggle-btn:hover {transform: translateY(-1px);}.toggle-btn.inactive {background: #ccc !important;color: #6b7280;}.toggle-btn.disabled {background: #ccc !important;color: #6b7280 !important;opacity: 0.6;cursor: default !important;}.toggle-btn.disabled:hover {background: #ccc !important;color: #6b7280 !important;transform: none !important;}.legend-section {display: flex;flex-direction: column;gap: 4px;flex-shrink: 0;}.legend-items {display: grid;grid-template-columns: repeat(2, 1fr);gap: 3px 8px;align-items: center;}.legend-item {display: flex;align-items: center;font-size: 0.6rem;white-space: nowrap;line-height: 1.2;}.legend-item.disabled {opacity: 0.25;}.legend-color, .legend-icon {width: 12px;height: 12px;margin-right: 3px;border-radius: 50%;border: 1px solid #d1d5db;flex-shrink: 0;}.legend-line {width: 12px;height: 3px;margin-right: 3px;border-radius: 1px;}.legend-icon {display: flex;align-items: center;justify-content: center;color: white;font-weight: bold;font-size: 7px;}.camera-icon {background: #4c6baf;}.incident-icon {background: #ff0000;}.fire-icon {background: #ff5722;}.air-quality-icon {background: #4dc44d;}.time-display {font-weight: 600;font-size: 0.7rem;margin: 0;line-height: 1.2;flex: 1;text-align: left;}.time-slider {width: 100%;margin: 0;height: 4px;-webkit-appearance: none;appearance: none;border-radius: 2px;outline: none;position: relative;background: transparent;}.time-slider::before {content: '';position: absolute;top: 0;left: 0;right: 0;bottom: 0;background: linear-gradient(to right, #aaa 0%, #aaa var(--past-percentage, 35%), #555 var(--past-percentage, 35%), #555 100%);border-radius: 2px;z-index: 1;}.time-slider::-webkit-slider-thumb {-webkit-appearance: none;appearance: none;width: 16px;height: 16px;background: #333;border-radius: 50%;cursor: pointer;border: 2px solid white;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);position: relative;z-index: 2;}.time-slider::-moz-range-thumb {width: 16px;height: 16px;background: #333;border-radius: 50%;cursor: pointer;border: 2px solid white;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);position: relative;z-index: 2;}.slider-labels {display: flex;justify-content: space-between;font-size: 10px;color: #6b7280;margin: 5px 0 0 0;line-height: 1;}.play-button {background: #4a7c59;color: white;border: none;padding: 3px 8px;border-radius: 25px;cursor: pointer;font-size: 0.7rem;font-weight: 600;transition: all 0.2s ease;line-height: 1.2;min-width: 75px;}.play-button span {font-size: 75%;font-weight: bold;transform: translate(-2px, -1.6px);display: inline-block;}.play-button:hover {background: #5a8c69;transform: translateY(-1px);}.play-button.playing {background: #b85450;}.play-button.playing:hover {background: #c86460;}.animation-controls {display: flex;align-items: center;gap: 8px;flex-shrink: 0;}.speed-control {font-size: 0.7rem;color: #6b7280;display: flex;align-items: center;gap: 3px;white-space: nowrap;}.speed-control select {font-size: 0.7rem;padding: 1px 3px;border: 1px solid #d1d5db;border-radius: 3px;background: white;color: #374151;}.speed-control select:disabled {background: #f3f4f6;color: #9ca3af;}.speed-control.disabled {opacity: 0.5;pointer-events: none;}.slider-container {display: flex;flex-direction: column;gap: 2px;margin-bottom: 6px;}.map-marker-fire {background: transparent !important;border: none !important;display: flex;align-items: center;justify-content: center;}.fire-icon-svg {background-size: contain;background-repeat: no-repeat;background-position: center;transition: transform 0.2s ease;}.fire-icon-svg.fire-1 {background-image: url("../images/fire_1.svg");}.fire-icon-svg.fire-2 {background-image: url("../images/fire_2.svg");}.fire-icon-svg.fire-3 {background-image: url("../images/fire_3.svg");}.fire-icon-svg.fire-4 {background-image: url("../images/fire_4.svg");}.fire-icon-svg.fire-5 {background-image: url("../images/fire_5.svg");}.map-marker-air {display: flex;align-items: center;justify-content: center;background: white;border: 2px solid;border-radius: 50%;color: white;font-weight: bold;font-size: 11px;text-align: center;line-height: 1;box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);min-width: 32px;min-height: 32px;padding: 2px;}.map-marker-air.good {border-color: #00c400;background: #00c400;}.map-marker-air.moderate {border-color: #e6e600;background: #e6e600;color: #333;}.map-marker-air.unhealthy-sensitive {border-color: #e06800;background: #e06800;}.map-marker-air.unhealthy {border-color: #e00000;background: #e00000;}.map-marker-air.very-unhealthy {border-color: #7a3682;background: #7a3682;}.map-marker-air.hazardous {border-color: #6b001f;background: #6b001f;}.air-quality-display {display: flex;flex-direction: column;align-items: center;gap: 1px;}.air-quality-main {font-size: 12px;font-weight: bold;line-height: 1;}.air-quality-sub {font-size: 8px;line-height: 1;opacity: 0.9;}.leaflet-zoom-anim .fire-icon-svg {transition: none;}.map-marker-cameras, .map-marker-incidents {display: flex;align-items: center;justify-content: center;}.map-marker-cameras {width: 18px;height: 18px;font-size: 1.5rem;}.map-marker-incidents {background: #ff0000;width: 36px;height: 36px;border: 4px solid #ff8a50;font-size: 0.95rem;border-radius: 50%;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);}.marker-custom {font-size: 2rem;}.marker-cluster-camera {position: relative;display: flex;align-items: center;justify-content: center;}.marker-cluster-camera .camera-base {width: 24px;height: 24px;font-size: 1.5rem;}.marker-cluster-camera .cluster-count {position: absolute;top: 5px;right: -7px;background: #4c6baf;color: white;border-radius: 50%;width: 16px;height: 16px;display: flex;align-items: center;justify-content: center;font-size: 0.6rem;font-weight: bold;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);line-height: 1;}.popup-content {max-width: calc(100vw - 40px) !important;box-sizing: border-box;}.popup-content h3 {margin: 0 0 10px 0;font-size: 1.0rem;text-transform: uppercase;word-wrap: break-word;word-break: break-word;}.popup-content p {margin: -5px 0 10px 0;font-size: 0.8rem;word-wrap: break-word;word-break: break-word;}.popup-content-info {display: grid;grid-template-columns: auto 1fr;gap: 5px 10px;font-size: 0.8rem;min-width: 0;overflow: hidden;}.popup-content-info .label {font-weight: bold;white-space: nowrap;}.popup-content-info .value {white-space: normal;overflow-wrap: anywhere;word-wrap: break-word;word-break: break-word;min-width: 0;}.leaflet-popup-content {max-width: 90vw !important;min-width: 300px !important;font-family: "Poppins", sans-serif;}.leaflet-popup.camera-img .leaflet-popup-content {margin: 0 !important;}.popup-camera {width: 100%;height: auto;cursor: pointer;display: block;}.popup-camera-container img {border-radius: 12px;}.image-fullscreen-overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.9);z-index: 10000;display: flex;align-items: center;justify-content: center;cursor: pointer;}.image-fullscreen {width: auto;height: 90vh;object-fit: contain;border-radius: 8px;box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);}.image-close-btn {position: absolute;top: 20px;right: 20px;background: rgba(255, 255, 255, 0.9);color: #333;border: none;border-radius: 50%;width: 40px;height: 40px;font-size: 18px;cursor: pointer;display: flex;align-items: center;justify-content: center;box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);}.image-close-btn:hover {background: white;}@media (max-width: 768px) {.time-section {margin-top: 6px;min-width: 0;}.controls {min-width: unset;width: calc(100vw - 16px);left: 8px;bottom: 18px;transform: none;padding: 8px 10px;}.controls-grid {grid-template-columns: 1fr;gap: 8px;}.layer-toggles {order: 0;display: grid;grid-template-columns: repeat(5, 1fr);gap: 6px;flex-wrap: wrap;justify-content: space-between;}.toggle-group {display: contents;}.toggle-btn {height: 1.25rem;display: flex;align-items: center;justify-content: center;text-align: center;white-space: normal;word-break: break-word;padding: 4px 6px;flex-grow: 1;width: auto;grid-column: span 1;}.toggle-btn span {display: none;}.legend-items {grid-template-columns: repeat(3, 1fr);gap: 2px 6px;margin-top: 3px;}.legend-item {font-size: 0.7rem;}.image-fullscreen {width: 95vw;height: auto;}}